import os
import telebot
import threading
from flask import Flask, request
from waitress import serve
import sqlite3
from time import sleep
from telebot import types

# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
TOKEN = os.environ.get('BOT_TOKEN')
WEBHOOK_URL = os.environ.get('WEBHOOK_URL', '')
PORT = int(os.environ.get('PORT', 10000))

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
bot = telebot.TeleBot('8488238859:AAEu30M-KawUYmB9PVxTwoyGZhLQKWVInlY')
us = ''
app = Flask(__name__)


# ================= FLASK ROUTES =================
@app.route('/')
def home():
    return "Telegram Bot is running! ‚úÖ"


@app.route('/health')
def health():
    return {"status": "ok", "bot": "running"}, 200


@app.route('/webhook', methods=['POST'])
def webhook():
    if request.headers.get('content-type') == 'application/json':
        json_string = request.get_data().decode('utf-8')
        update = telebot.types.Update.de_json(json_string)
        bot.process_new_updates([update])
        return '', 200
    return '', 403


# ================= TELEGRAM BOT HANDLERS =================
@bot.message_handler(commands=['start'])
def main(message):
    conn = sqlite3.connect('database.sql')
    cur = conn.cursor()
    cur.execute('''CREATE TABLE IF NOT EXISTS users (id int auto_increment primary key, name varchar(50), water_cups int, h_sleep int, sports int)''')
    cur.execute('''CREATE TABLE IF NOT EXISTS achievments (id int auto_increment primary key, name varchar(50))''')
    cur.execute('''CREATE TABLE IF NOT EXISTS achievments_users (id int auto_increment primary key, achievment_id int, user_id int)''')
    global us
    us = message.from_user.username
    cur.execute('INSERT INTO users (name, water_cups, h_sleep, sports) VALUES (?, 0, 0, 0)', (us,))
    cur.execute('INSERT OR IGNORE INTO achievments (id, name) VALUES (1, "start")')
    cur.execute('INSERT OR IGNORE INTO achievments (id, name) VALUES (2, "enegriser")')
    cur.execute('INSERT OR IGNORE INTO achievments (id, name) VALUES (3, "healthy rithm")')
    conn.commit()
    cur.close()
    markup = types.ReplyKeyboardMarkup(one_time_keyboard=True, resize_keyboard=True)
    phys_health = types.KeyboardButton('–§–∏–∑–∏—á–µ—Å–∫–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µüí™')
    mental_health = types.KeyboardButton('–î—É—à–µ–≤–Ω–æ–µ –∑–¥–æ—Ä–æ–≤—å–µüëê')
    social_health = types.KeyboardButton('–°–æ—Ü–∏–∞–ª—å–Ω–æ–µ –±–ª–∞–≥–æ–ø–æ–ª—É—á–∏–µü§ù')
    markup.row(phys_health, mental_health, social_health)
    bot.send_message(message.chat.id, '–ü—Ä–∏–≤–µ—Ç! –Ø ‚Äî —Ç–≤–æ–π –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –≥–∏–¥ –ø–æ –∑–¥–æ—Ä–æ–≤—å—é –∏ –±–ª–∞–≥–æ–ø–æ–ª—É—á–∏—é. –ú–æ—è –∑–∞–¥–∞—á–∞ ‚Äî –ø–æ–º–æ—á—å —Ç–µ–±–µ —Å—Ç–∞—Ç—å —ç–Ω–µ—Ä–≥–∏—á–Ω–µ–µ, —É—Å—Ç–æ–π—á–∏–≤–µ–µ –∏ —á—É–≤—Å—Ç–≤–æ–≤–∞—Ç—å —Å–µ–±—è –ª—É—á—à–µ –∏–∑–æ –¥–Ω—è –≤ –¥–µ–Ω—å. –í–º–µ—Å—Ç–µ –º—ã —Å–æ–∑–¥–∞–¥–∏–º —Ç–≤–æ–π –º–∞—Ä—à—Ä—É—Ç –∫ —Å–∏–ª—å–Ω–æ–º—É —Å–∞–º–æ—á—É–≤—Å—Ç–≤–∏—é!ü§ó')
    sleep(0.4)
    bot.send_message(message.chat.id, '–ö–∞–∫—É—é —Ü–µ–ª—å –ø–æ –∑–¥–æ—Ä–æ–≤—å—é –≤—ã–±–µ—Ä–µ–º —Å–µ–≥–æ–¥–Ω—è?üëá', reply_markup=markup)
    bot.register_next_step_handler(message, on_click)


def on_click(message):
    if message.text == '–§–∏–∑–∏—á–µ—Å–∫–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µüí™':
        markup = types.ReplyKeyboardMarkup(one_time_keyboard=True, resize_keyboard=True)
        btn_act = types.KeyboardButton('–¢—Ä–µ–∫–µ—Ä –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏')
        btn_zozh = types.KeyboardButton('–°–æ–≤–µ—Ç—ã –ø–æ –ó–û–ñ')
        btn_chall = types.KeyboardButton('–ó–¥–æ—Ä–æ–≤—ã–µ —á–µ–ª–ª–µ–Ω–¥–∂–∏')
        markup.row(btn_act)
        markup.row(btn_zozh)
        markup.row(btn_chall)
        ph = open('./images/ph.jpg', 'rb')
        bot.send_photo(message.chat.id, ph)
        bot.send_message(message.chat.id, '–¢–≤–æ—ë —Ç–µ–ª–æ ‚Äî —ç—Ç–æ —Ç–≤–æ–π –≥–ª–∞–≤–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –≤—Å–µ—Ö —Å–≤–µ—Ä—à–µ–Ω–∏–π. –ó–¥–µ—Å—å –º—ã –Ω–µ —Å—Ç–∞–≤–∏–º —Ä–µ–∫–æ—Ä–¥—ã, –∞ —É—á–∏–º—Å—è –±–µ—Ä–µ–∂–Ω–æ –∏ —Å —Ä–∞–¥–æ—Å—Ç—å—é –∑–∞—Ä—è–∂–∞—Ç—å –µ–≥–æ, —Å–ª—É—à–∞—Ç—å –µ–≥–æ —Å–∏–≥–Ω–∞–ª—ã –∏ —Ä–∞–¥–æ–≤–∞—Ç—å—Å—è –¥–≤–∏–∂–µ–Ω–∏—é. –ù–µ–±–æ–ª—å—à–∏–µ —à–∞–≥–∏ –≤–µ–¥—É—Ç –∫ –±–æ–ª—å—à–∏–º –ø–µ—Ä–µ–º–µ–Ω–∞–º!', reply_markup=markup)
    elif message.text == '–î—É—à–µ–≤–Ω–æ–µ –∑–¥–æ—Ä–æ–≤—å–µüëê':
        dh = open('./images/dh.jpg', 'rb')
        markup = types.ReplyKeyboardMarkup(one_time_keyboard=True, resize_keyboard=True)
        btn_foc = types.KeyboardButton('SOS')
        btn_prof = types.KeyboardButton('–ù–∞–≤–∏–≥–∞—Ç–æ—Ä –ø–æ–º–æ—â–∏')
        markup.add(btn_foc, btn_prof)
        bot.send_photo(message.chat.id, dh)
        bot.send_message(message.chat.id, '–ó–¥–µ—Å—å –Ω–µ –Ω—É–∂–Ω–æ –±—ã—Ç—å —Å–∏–ª—å–Ω—ã–º. –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ –±—ã—Ç—å. –≠—Ç–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ, —á—Ç–æ–±—ã —É—Å–ø–æ–∫–æ–∏—Ç—å—Å—è, –ø–æ–Ω—è—Ç—å —Å–≤–æ–∏ —á—É–≤—Å—Ç–≤–∞ –∏ –Ω–∞–π—Ç–∏ –æ–ø–æ—Ä—É.', reply_markup=markup)
    elif message.text == '–°–æ—Ü–∏–∞–ª—å–Ω–æ–µ –±–ª–∞–≥–æ–ø–æ–ª—É—á–∏–µü§ù':
        markup = types.ReplyKeyboardMarkup(one_time_keyboard=True, resize_keyboard=True)
        btn_foc = types.KeyboardButton('–§–æ–∫—É—Å –∏ –≤—Ä–µ–º—è')
        btn_prof = types.KeyboardButton('–ü—Ä–æ—Ñ–æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è –∏ —Å–∞–º–æ–ø–æ–∑–Ω–∞–Ω–∏–µ')
        btn_soft = types.KeyboardButton('–°–æ—Ñ—Ç-—Å–∫–∏–ª–ª—ã')
        markup.add(btn_foc, btn_prof, btn_soft)
        sb = open('./images/sb.jpg', 'rb')
        bot.send_photo(message.chat.id, sb)
        bot.send_message(message.chat.id, '–í —ç—Ç–æ–º –º–µ—Å—Ç–µ —Å–æ–±—Ä–∞–Ω—ã —Ä–µ—Å—É—Ä—Å—ã, –ø—Ä–∏–∑–≤–∞–Ω–Ω—ã–µ –ø–æ–º–æ—á—å —Ç–µ–±–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –æ—Å–≤–∞–∏–≤–∞—Ç—å –∑–Ω–∞–Ω–∏—è, –ª—É—á—à–µ —Ä–∞–∑–±–∏—Ä–∞—Ç—å—Å—è –≤ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö —á—É–≤—Å—Ç–≤–∞—Ö –∏ —É–≤–µ—Ä–µ–Ω–Ω–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å –æ–∫—Ä—É–∂–∞—é—â–∏–º–∏. –ü—Ä–µ–¥—Å—Ç–∞–≤—å, —á—Ç–æ —Ç—ã ‚Äì –∫–ª—é—á–µ–≤–∞—è —Ñ–∏–≥—É—Ä–∞ —Å–≤–æ–µ–π –∂–∏–∑–Ω–∏, –∞ —ç—Ç–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã ‚Äì —Ç–≤–æ–∏ –ª–∏—á–Ω—ã–µ ¬´—Å—É–ø–µ—Ä—Å–∏–ª—ã¬ª, –æ—Ç–∫—Ä—ã–≤–∞—é—â–∏–µ –Ω–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏.', reply_markup=markup)


@bot.message_handler()
def main(message):
    if message.text == '–í—ã–ø–∏–ª —Å—Ç–∞–∫–∞–Ω –≤–æ–¥—ãüí¶':
        conn = sqlite3.connect('database.sql')
        cur = conn.cursor()
        cur.execute(
            '''UPDATE users SET water_cups = water_cups + 1 WHERE name = ?''', (us,))
        result = cur.execute('SELECT water_cups FROM users WHERE name = ?', (us,))
        for elem in result:
            bot.send_message(message.chat.id, f'+1 \n –í—Å–µ–≥–æ –≤—ã –≤—ã–ø–∏–ª–∏ {elem[0]} —Å—Ç–∞–∫–∞–Ω–æ–≤, —Ç–∞–∫ –¥–µ—Ä–∂–∞—Ç—å!')
            if int(elem) >= 16:
                bot.send_message(message.chat.id, '–ü–æ–∑–¥—Ä–∞–≤–ª—è—é! –í—ã –ø–æ–ª—É—á–∏–ª–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ "–†–æ–¥–Ω–∏—á–æ–∫üíß"')
                cur.execute('INSERT INTO achievments_users (achievment_id, user_id) VALUES (1, (SELECT id FROM users WHERE name=?))', (us,))
            break
        conn.commit()
        cur.close()
    if message.text == '–û—Ç–º–µ—Ç–∏—Ç—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å‚úÖ':
        conn = sqlite3.connect('database.sql')
        cur = conn.cursor()
        cur.execute(
            '''UPDATE users SET sports = sports + 1 WHERE name = ?''', (us,))
        result = cur.execute('SELECT sports FROM users WHERE name = ?', (us,))
        for elem in result:
            bot.send_message(message.chat.id, f'+1 \n –í—Å–µ–≥–æ —É –≤–∞—Å –±—ã–ª–æ {elem[0]} –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π, —Ç–∞–∫ –¥–µ—Ä–∂–∞—Ç—å!')
            if int(elem) >= 5:
                bot.send_message(message.chat.id, '–ü–æ–∑–¥—Ä–∞–≤–ª—è—é! –í—ã –ø–æ–ª—É—á–∏–ª–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ "–ì–∏–±–∫–∏–π —É–º –∏ —Ç–µ–ª–æüßò‚Äç‚ôÄÔ∏è"')
                cur.execute(
                    'INSERT INTO achievments_users (achievment_id, user_id) VALUES (2, (SELECT id FROM users WHERE name=?))',
                    (us,))
            break
        conn.commit()
        cur.close()
    if message.text == '–°–æ–≤–µ—Ç—ã –ø–æ –ó–û–ñ':
        sz = open('./images/sz.jpg', 'rb')
        bot.send_photo(message.chat.id, sz)
        bot.send_message(message.chat.id, '–í–æ—Ç 10 –≥–ª–∞–≤–Ω—ã—Ö —Å–æ–≤–µ—Ç–æ–≤ –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏—è –∑–¥–æ—Ä–æ–≤–æ–≥–æ –æ–±—Ä–∞–∑–∞ –∂–∏–∑–Ω–∏, –∞–∫—Ü–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –Ω–∞ –ø—Ä–æ—Å—Ç–æ—Ç–µ –∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.'
                                          '1. –ü—Ä–µ–≤—Ä–∞—Ç–∏ –ø–∏—Ç—å–µ –≤–æ–¥—ã –≤ –ø—Ä–∏–≤—ã—á–∫—É. –ù–∞—á–Ω–∏ –¥–µ–Ω—å —Å–æ —Å—Ç–∞–∫–∞–Ω–∞ –≤–æ–¥—ã –∫–æ–º–Ω–∞—Ç–Ω–æ–π —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã –∏ –≤—Å–µ–≥–¥–∞ –∏–º–µ–π –ø—Ä–∏ —Å–µ–±–µ –±—É—Ç—ã–ª–∫—É —Å –≤–æ–¥–æ–π. –ó–∞—á–∞—Å—Ç—É—é, —á—É–≤—Å—Ç–≤–æ —É–ø–∞–¥–∫–∞ —Å–∏–ª –∏ –∂–µ–ª–∞–Ω–∏–µ –ø–µ—Ä–µ–∫—É—Å–∏—Ç—å ‚Äì —ç—Ç–æ –≤—Å–µ–≥–æ –ª–∏—à—å —Å–∏–≥–Ω–∞–ª –æ—Ä–≥–∞–Ω–∏–∑–º–∞ –æ –Ω–µ—Ö–≤–∞—Ç–∫–µ –∂–∏–¥–∫–æ—Å—Ç–∏.'
                                          '2. –í–Ω–æ—Å–∏ –ø–æ–ª–µ–∑–Ω–æ–µ, –∞ –Ω–µ –æ—Ç–∫–∞–∑—ã–≤–∞–π—Å—è –æ—Ç –ø—Ä–∏–≤—ã—á–Ω–æ–≥–æ. –í–º–µ—Å—Ç–æ –ø–æ–ª–Ω–æ–≥–æ –∏—Å–∫–ª—é—á–µ–Ω–∏—è —Å–ª–∞–¥–∫–æ–≥–æ, –ø–æ–ø—Ä–æ–±—É–π —Å–Ω–∞—á–∞–ª–∞ —Å—ä–µ—Å—Ç—å –ø–æ—Ä—Ü–∏—é —Å–∞–ª–∞—Ç–∞ –∏–∑ —Å–≤–µ–∂–∏—Ö –æ–≤–æ—â–µ–π. –°–æ—Å—Ä–µ–¥–æ—Ç–æ—á–µ–Ω–Ω–æ—Å—Ç—å –Ω–∞ –∑–¥–æ—Ä–æ–≤–æ–π –ø–∏—â–µ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–º –æ–±—Ä–∞–∑–æ–º —Å–æ–∫—Ä–∞—Ç–∏—Ç –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç—å –≤–æ –≤—Ä–µ–¥–Ω–æ–π. '
                                          '3. –ù–∞—Ö–æ–¥–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –¥–≤–∏–≥–∞—Ç—å—Å—è –≥–¥–µ —É–≥–æ–¥–Ω–æ. –ù–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø–æ—Å–µ—â–∞—Ç—å —Å–ø–æ—Ä—Ç–∑–∞–ª. –î–∞–∂–µ –ø–æ–ª—É—á–∞—Å–æ–≤–∞—è –ø—Ä–æ–≥—É–ª–∫–∞ –±—ã—Å—Ç—Ä—ã–º —à–∞–≥–æ–º, —Ç–∞–Ω—Ü—ã –ø–æ–¥ –ª—é–±–∏–º—É—é –º—É–∑—ã–∫—É –∏–ª–∏ –ª–µ–≥–∫–∞—è —Ä–∞—Å—Ç—è–∂–∫–∞ –ø–µ—Ä–µ–¥ —Å–Ω–æ–º –ø—Ä–∏–Ω–µ—Å—É—Ç –ø–æ–ª—å–∑—É.'
                                          '4. –°–æ–Ω ‚Äì —Ç–≤–æ–π –≤–µ—Ä–Ω—ã–π —Å–æ—é–∑–Ω–∏–∫. –°—Ç–∞—Ä–∞–π—Å—è —Å–ø–∞—Ç—å –Ω–µ –º–µ–Ω–µ–µ 7-9 —á–∞—Å–æ–≤ –∫–∞–∂–¥—É—é –Ω–æ—á—å. –°–æ–∑–¥–∞–π –∫–æ–º—Ñ–æ—Ä—Ç–Ω—ã–µ —É—Å–ª–æ–≤–∏—è: –∑–∞—Ç–µ–º–Ω–µ–Ω–∏–µ, –ø—Ä–æ—Ö–ª–∞–¥–Ω—ã–π –≤–æ–∑–¥—É—Ö –∏ –æ—Ç–∫–∞–∑ –æ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≥–∞–¥–∂–µ—Ç–æ–≤ –∑–∞ —á–∞—Å –¥–æ –æ—Ç—Ö–æ–¥–∞ –∫–æ —Å–Ω—É, –ø–æ–º–æ–≥—É—Ç —Ç–µ–±–µ –≤ —ç—Ç–æ–º.'
                                          '5. –û—Å–æ–∑–Ω–∞–Ω–Ω–æ —Ä–∞—Å—Å–ª–∞–±–ª—è–π—Å—è. –£–¥–µ–ª—è–π —Ö–æ—Ç—è –±—ã 10-15 –º–∏–Ω—É—Ç –≤ –¥–µ–Ω—å –¥–ª—è —Ç–∏—à–∏–Ω—ã –∏ –ø–æ–∫–æ—è: –ø—Ä–æ—Å—Ç–æ –ø–æ—Å–∏–¥–∏ –≤ —Ç–∏—à–∏–Ω–µ, —Å—Ñ–æ–∫—É—Å–∏—Ä—É–π—Å—è –Ω–∞ –¥—ã—Ö–∞–Ω–∏–∏ –∏–ª–∏ –ø–æ—Å–º–æ—Ç—Ä–∏ –≤ –æ–∫–Ω–æ. –≠—Ç–æ –æ—Ç–ª–∏—á–Ω—ã–π —Å–ø–æ—Å–æ–± –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å –º–æ–∑–≥.'
                                          '6. –ù–∞–ø–æ–ª–Ω—è–π —Ç–∞—Ä–µ–ª–∫—É —Ü–≤–µ—Ç–æ–º. –ß–µ–º –±–æ–ª—å—à–µ —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–Ω—ã—Ö –æ–≤–æ—â–µ–π –∏ —Ñ—Ä—É–∫—Ç–æ–≤ —Ä–∞–∑–Ω—ã—Ö —Ü–≤–µ—Ç–æ–≤ –≤ —Ç–≤–æ–µ–º —Ä–∞—Ü–∏–æ–Ω–µ, —Ç–µ–º —à–∏—Ä–µ —Å–ø–µ–∫—Ç—Ä –ø–æ–ª—É—á–∞–µ–º—ã—Ö –≤–∏—Ç–∞–º–∏–Ω–æ–≤ –∏ –∞–Ω—Ç–∏–æ–∫—Å–∏–¥–∞–Ω—Ç–æ–≤.'
                                          '7. –°–ª–µ–¥–∏ –∑–∞ –æ—Å–∞–Ω–∫–æ–π. –î–µ—Ä–∂–∞—Ç—å —Å–ø–∏–Ω—É –ø—Ä—è–º–æ –≤–æ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã –∑–∞ —Å—Ç–æ–ª–æ–º –∏ —Ö–æ–¥—å–±—ã ‚Äì –ø–æ–ª–µ–∑–Ω–æ –Ω–µ —Ç–æ–ª—å–∫–æ –¥–ª—è –∑–¥–æ—Ä–æ–≤—å—è –ø–æ–∑–≤–æ–Ω–æ—á–Ω–∏–∫–∞ –∏ –æ—Ä–≥–∞–Ω–æ–≤ –¥—ã—Ö–∞–Ω–∏—è, –Ω–æ –∏ –ø—Ä–∏–¥–∞–µ—Ç —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏.'
                                          '8. –û—Ç–¥–∞–≤–∞–π –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤—É, –∞ –Ω–µ –ø–æ–¥—Å—á–µ—Ç—É –∫–∞–ª–æ—Ä–∏–π. –í—ã–±–∏—Ä–∞–π –ø—Ä–æ–¥—É–∫—Ç—ã —Å –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–æ–π (—Ü–µ–ª—å–Ω–æ–∑–µ—Ä–Ω–æ–≤—ã–µ, –Ω–∞—Ç—É—Ä–∞–ª—å–Ω–æ–µ –º—è—Å–æ –≤–º–µ—Å—Ç–æ –∫–æ–ª–±–∞—Å–Ω—ã—Ö –∏–∑–¥–µ–ª–∏–π, —Å–≤–µ–∂–∏–µ —Ñ—Ä—É–∫—Ç—ã –≤–º–µ—Å—Ç–æ –ø–∞–∫–µ—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–æ–∫–æ–≤).'
                                          '9. –ù–µ –∑–∞–±—ã–≤–∞–π –æ —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–≤—è–∑—è—Ö. –ó–¥–æ—Ä–æ–≤—å–µ –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –∏ –≤ –æ–±—â–µ–Ω–∏–∏ —Å –¥—Ä—É–≥–∏–º–∏ –ª—é–¥—å–º–∏. –ù–µ–±–æ–ª—å—à–∞—è –±–µ—Å–µ–¥–∞ —Å –±–ª–∏–∑–∫–∏–º —á–µ–ª–æ–≤–µ–∫–æ–º –∏–ª–∏ —Å–æ–≤–º–µ—Å—Ç–Ω–∞—è –ø—Ä–æ–≥—É–ª–∫–∞ —Å –¥—Ä—É–≥–æ–º ‚Äì –æ—Ç–ª–∏—á–Ω—ã–π —Å–ø–æ—Å–æ–± –ø–æ–¥–¥–µ—Ä–∂–∞—Ç—å –º–µ–Ω—Ç–∞–ª—å–Ω–æ–µ –∑–¥–æ—Ä–æ–≤—å–µ.'
                                          '10. –ë—É–¥—å –¥–æ–±—Ä –∫ —Å–µ–±–µ. –ù–µ –∫—Ä–∏—Ç–∏–∫—É–π —Å–µ–±—è –∑–∞ —Å–ª—É—á–∞–π–Ω—ã–µ —Å–ª–∞–±–æ—Å—Ç–∏. –°–ª—É—á–∞–π–Ω–æ –ø—Ä–æ–ø—É—â–µ–Ω–Ω–∞—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ –∏–ª–∏ —Å—ä–µ–¥–µ–Ω–Ω—ã–π –∫—É—Å–æ—á–µ–∫ –ø–∏—Ü—Ü—ã –Ω–µ —Å–º–æ–≥—É—Ç –ø–µ—Ä–µ—á–µ—Ä–∫–Ω—É—Ç—å –≤—Å–µ —Ç–≤–æ–∏ —É—Å–∏–ª–∏—è. –°–∞–º–æ–µ –≥–ª–∞–≤–Ω–æ–µ ‚Äì —Å –ª—é–±–æ–≤—å—é –∫ —Å–µ–±–µ –≤–æ–∑–≤—Ä–∞—â–∞–π—Å—è –∫ –∑–¥–æ—Ä–æ–≤—ã–º –ø—Ä–∏–≤—ã—á–∫–∞–º.'
                                          '–ü–æ–º–Ω–∏, —á—Ç–æ –Ω–µ–±–æ–ª—å—à–∏–µ, –Ω–æ –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–µ —à–∞–≥–∏ –∫ –∑–¥–æ—Ä–æ–≤–æ–º—É –æ–±—Ä–∞–∑—É –∂–∏–∑–Ω–∏ –≥–æ—Ä–∞–∑–¥–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–µ–µ, —á–µ–º —Ä–µ–¥–∫–∏–µ, –∏–∑–Ω—É—Ä–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–¥–≤–∏–≥–∏. –£ —Ç–µ–±—è –≤—Å–µ –ø–æ–ª—É—á–∏—Ç—Å—è! üå±üí™')
    if message.text == '–¢—Ä–µ–∫–µ—Ä –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏':
        ta = open('./images/ta.jpg', 'rb')
        bot.send_photo(message.chat.id, ta)
        markup = types.ReplyKeyboardMarkup()
        btn_voda = types.KeyboardButton('–í—ã–ø–∏—Ç–∞—è –≤–æ–¥–∞ü•§')
        btn_sport = types.KeyboardButton('–°–ø–æ—Ä—Çüí™')
        btn_son = types.KeyboardButton('–°–æ–Ωüò¥')
        markup.add(btn_voda, btn_sport, btn_son)
        bot.send_message(message.chat.id, '–•–æ—Ä–æ—à–æ, —Ç–µ–ø–µ—Ä—å –≤—ã–±–µ—Ä–∏, –∫–∞–∫—É—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –º—ã –±—É–¥–µ–º –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å?', reply_markup=markup)
        bot.register_next_step_handler(message, branch)
    if message.text == '–ó–¥–æ—Ä–æ–≤—ã–µ —á–µ–ª–ª–µ–Ω–¥–∂–∏':
        print(1)
    if message.text == '–§–æ–∫—É—Å –∏ –≤—Ä–µ–º—è':
        fiv = open('./images/fiv.jpg', 'rb')
        bot.send_photo(message.chat.id, fiv)
        bot.send_message(message.chat.id, "1. –ú–µ—Ç–æ–¥ Pomodoro: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ç–∞–π–º–µ—Ä –Ω–∞ 25 –º–∏–Ω—É—Ç, —á—Ç–æ–±—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ—Å—Ä–µ–¥–æ—Ç–æ—á–∏—Ç—å—Å—è –Ω–∞ —Ä–∞–±–æ—Ç–µ, –∑–∞—Ç–µ–º —Å–¥–µ–ª–∞–π—Ç–µ –∫–æ—Ä–æ—Ç–∫–∏–π 5-–º–∏–Ω—É—Ç–Ω—ã–π –ø–µ—Ä–µ—Ä—ã–≤. –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —á–µ—Ç—ã—Ä–µ—Ö —Ç–∞–∫–∏—Ö –ø–µ—Ä–∏–æ–¥–æ–≤, —Å–¥–µ–ª–∞–π—Ç–µ –±–æ–ª–µ–µ –¥–ª–∏—Ç–µ–ª—å–Ω—ã–π –ø–µ—Ä–µ—Ä—ã–≤. –≠—Ç–æ –ø–æ–º–æ–∂–µ—Ç –∏–∑–±–µ–∂–∞—Ç—å –ø–µ—Ä–µ—É—Ç–æ–º–ª–µ–Ω–∏—è –∏ —É–ª—É—á—à–∏—Ç –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏—é –≤–Ω–∏–º–∞–Ω–∏—è."
                                          "2. –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–µ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ: –†–∞–∑–¥–µ–ª–∏—Ç–µ —Å–ª–æ–∂–Ω—É—é –∏ –ø—É–≥–∞—é—â—É—é –∑–∞–¥–∞—á—É –Ω–∞ –±–æ–ª–µ–µ –º–µ–ª–∫–∏–µ, –ª–µ–≥–∫–æ –≤—ã–ø–æ–ª–Ω–∏–º—ã–µ —ç—Ç–∞–ø—ã. –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —ç—Ç–∏—Ö —à–∞–≥–æ–≤ –±—É–¥–µ—Ç –≥–æ—Ä–∞–∑–¥–æ –ø—Ä–æ—â–µ. –ß—Ç–æ –≤—ã –ø–ª–∞–Ω–∏—Ä—É–µ—Ç–µ —Å–¥–µ–ª–∞—Ç—å —Å–µ–≥–æ–¥–Ω—è?"
                                          "3. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –ù–∞—á–∏–Ω–∞–π—Ç–µ —Å–≤–æ–π –¥–µ–Ω—å —Å —Å–∞–º–æ–π —Ç—Ä—É–¥–Ω–æ–π –∏–ª–∏ –Ω–µ–∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ–π –∑–∞–¥–∞—á–∏. –ü–æ—Å–ª–µ –µ—ë –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤—Å—ë –æ—Å—Ç–∞–ª—å–Ω–æ–µ –ø–æ–∫–∞–∂–µ—Ç—Å—è –Ω–∞–º–Ω–æ–≥–æ –ø—Ä–æ—â–µ!")
    if message.text == '–ü—Ä–æ—Ñ–æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è –∏ —Å–∞–º–æ–ø–æ–∑–Ω–∞–Ω–∏–µ':
        pis = open('./images/pis.jpg', 'rb')
        bot.send_photo(message.chat.id, pis)
        bot.send_message(message.chat.id, '1. –ú–∏–Ω–∏-–æ–ø—Ä–æ—Å "–ö—Ç–æ —è –≤–Ω—É—Ç—Ä–∏?": (–≤—Å–µ–≥–æ 5 –º–∏–Ω—É—Ç). –ü—Ä–æ–π–¥–∏ –∫–æ—Ä–æ—Ç–∫–∏–π –æ–ø—Ä–æ—Å–Ω–∏–∫, —á—Ç–æ–±—ã –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Å–≤–æ–π —Ç–∏–ø –º—ã—à–ª–µ–Ω–∏—è: —Ç—ã –ê–Ω–∞–ª–∏—Ç–∏–∫ (—Å—Ç—Ä–µ–º–∏—à—å—Å—è –∫ –≥–ª—É–±–æ–∫–æ–º—É –ø–æ–Ω–∏–º–∞–Ω–∏—é), –¢–≤–æ—Ä–µ—Ü (—Ñ–æ–Ω—Ç–∞–Ω–∏—Ä—É–µ—à—å –∏–¥–µ—è–º–∏), –°–∏—Å—Ç–µ–º–∞—Ç–∏–∑–∞—Ç–æ—Ä (—É–ø–æ—Ä—è–¥–æ—á–∏–≤–∞–µ—à—å —Ö–∞–æ—Å) –∏–ª–∏ –ú–µ–¥–∏–∞—Ç–æ—Ä (–Ω–∞–ª–∞–∂–∏–≤–∞–µ—à—å —Å–≤—è–∑–∏ –º–µ–∂–¥—É –ª—é–¥—å–º–∏)?'
                                          '2. –í–∞–∂–Ω–æ: –ù–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç "—Ö–æ—Ä–æ—à–∏—Ö" –∏–ª–∏ "–ø–ª–æ—Ö–∏—Ö" —Ç–∏–ø–æ–≤. –ì–∞—Ä–º–æ–Ω–∏—è –º–∏—Ä–∞ —Ç—Ä–µ–±—É–µ—Ç —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏—è! –≠—Ç–æ –ª–∏—à—å –æ—Ä–∏–µ–Ω—Ç–∏—Ä –¥–ª—è —Å–∞–º–æ–ø–æ–∑–Ω–∞–Ω–∏—è.'
                                          '3. –õ–µ–≥–∫–æ–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ: –í—Å–ø–æ–º–Ω–∏ –∏ –∑–∞–ø–∏—à–∏ 3 —Å–≤–æ–∏—Ö –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –∑–∞ –ø—Ä–æ—à–µ–¥—à—É—é –Ω–µ–¥–µ–ª—é (–¥–∞–∂–µ –Ω–µ–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–µ!). –ö–∞–∫ —ç—Ç–∏ —É—Å–ø–µ—Ö–∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏–∑—É—é—Ç —Ç–≤–æ–∏ —Å–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã?')
    if message.text == '–°–æ—Ñ—Ç-—Å–∫–∏–ª–ª—ã':
        ss = open('./images/ss.jpg', 'rb')
        bot.send_photo(message.chat.id, ss)
        bot.send_message(message.chat.id, '–ß—Ç–æ–±—ã —á—É–≤—Å—Ç–≤–æ–≤–∞—Ç—å —Å–µ–±—è —É–≤–µ—Ä–µ–Ω–Ω–æ –≤ –æ–±—â–µ–Ω–∏–∏:'
                                          '–ü—Ä–∞–≤–∏–ª–æ —Ç—Ä–µ—Ö —Å–µ–∫—É–Ω–¥: –ù–µ —Ç—Ä–∞—Ç—å –≤—Ä–µ–º—è –Ω–∞ —Ä–∞–∑–¥—É–º—å—è, —Å—Ä–∞–∑—É –Ω–∞—á–∏–Ω–∞–π –≥–æ–≤–æ—Ä–∏—Ç—å. –ü—Ä–æ—Å—Ç–æ–µ ¬´–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ, –∫–∞–∫ –ø–æ–∂–∏–≤–∞–µ—Ç–µ?¬ª ‚Äî —É–∂–µ —Ö–æ—Ä–æ—à–µ–µ –Ω–∞—á–∞–ª–æ.'
                                          '–í–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ–µ —Å–ª—É—à–∞–Ω–∏–µ: –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–π –∫–∏–≤–∫–∞–º–∏, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–π –∑—Ä–∏—Ç–µ–ª—å–Ω—ã–π –∫–æ–Ω—Ç–∞–∫—Ç, –∏—Å–ø–æ–ª—å–∑—É–π —É—Ç–æ—á–Ω—è—é—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã (¬´–Ø –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø–æ–Ω–∏–º–∞—é, —á—Ç–æ‚Ä¶?¬ª). –≠—Ç–æ –æ—á–µ–Ω—å –≤–∞–∂–Ω–æ –¥–ª—è –ª—é–¥–µ–π.'
                                          '–î–ª—è –≤—ã—Å—Ç—É–ø–ª–µ–Ω–∏–π –ø–µ—Ä–µ–¥ –∞—É–¥–∏—Ç–æ—Ä–∏–µ–π (–¥–∞–∂–µ –ø–µ—Ä–µ–¥ –∫–ª–∞—Å—Å–æ–º):'
                                          '–î—ã—Ö–∞–Ω–∏–µ: –ü–µ—Ä–µ–¥ —Ç–µ–º –∫–∞–∫ –Ω–∞—á–∞—Ç—å, —Å–¥–µ–ª–∞–π —Ç—Ä–∏ –≥–ª—É–±–æ–∫–∏—Ö –≤–¥–æ—Ö–∞ –∏ –≤—ã–¥–æ—Ö–∞.'
                                          '–£—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å: –û–±–µ—Å–ø–µ—á—å —Å–µ–±–µ —É—Å—Ç–æ–π—á–∏–≤–æ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ –Ω–æ–≥ –∏–ª–∏ –æ–ø–∏—Ä–∞–π—Å—è —Ä—É–∫–∞–º–∏ –Ω–∞ —Ç—Ä–∏–±—É–Ω—É ‚Äî —ç—Ç–æ –¥–æ–±–∞–≤–ª—è–µ—Ç —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏.'
                                          '–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π —Ä–∏—Ç–º: –ì–æ–≤–æ—Ä–∏ –Ω–µ–º–Ω–æ–≥–æ –º–µ–¥–ª–µ–Ω–Ω–µ–µ, —á–µ–º –æ–±—ã—á–Ω–æ. –ü–∞—É–∑–∞ ‚Äî —ç—Ç–æ –ø—Ä–∏–∑–Ω–∞–∫ —Å–∏–ª—ã, –∞ –Ω–µ —Å–ª–∞–±–æ—Å—Ç–∏.'
                                          '–î–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–π —Ä–∞–±–æ—Ç—ã –≤ –∫–æ–º–∞–Ω–¥–µ:'
                                          '–¢–æ—á–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è–π –∑–∞–¥–∞—á–∏: ¬´–Ø –≤–æ–∑—å–º—É –Ω–∞ —Å–µ–±—è —ç—Ç—É —á–∞—Å—Ç—å, –∞ —Ç—ã –ø—Ä–æ–≤–µ—Ä–∏—à—å –≤–æ—Ç —ç—Ç–æ, –¥–æ–≥–æ–≤–æ—Ä–∏–ª–∏—Å—å?¬ª'
                                          '–û—Ü–µ–Ω–∏–≤–∞–π –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –ø—É–±–ª–∏—á–Ω–æ: ¬´–û—Ç–ª–∏—á–Ω–æ–µ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ!¬ª ‚Äî —ç—Ç–æ —Å–ø–æ—Å–æ–±—Å—Ç–≤—É–µ—Ç —Å–æ–∑–¥–∞–Ω–∏—é –±–ª–∞–≥–æ–ø—Ä–∏—è—Ç–Ω–æ–π –∞—Ç–º–æ—Å—Ñ–µ—Ä—ã.'
                                          '–ù–µ —Å—Ç–µ—Å–Ω—è–π—Å—è –∑–∞–¥–∞–≤–∞—Ç—å –≤–æ–ø—Ä–æ—Å—ã, –µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ–ø–æ–Ω—è—Ç–Ω–æ: –≠—Ç–æ –ø—Ä–æ—è–≤–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏, –∞ –Ω–µ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ–∫ –∑–Ω–∞–Ω–∏–π.'
                                          '–û—Å–Ω–æ–≤–Ω–æ–π —Å–æ–≤–µ—Ç: –†–∞–∑–≤–∏—Ç–∏–µ –Ω–µ –ø–æ–¥—Ä–∞–∑—É–º–µ–≤–∞–µ—Ç –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ —Å–æ–≤–µ—Ä—à–µ–Ω—Å—Ç–≤–∞. –≠—Ç–æ –∑–Ω–∞—á–∏—Ç —Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è –Ω–µ–º–Ω–æ–≥–æ –ª—É—á—à–µ —Å –∫–∞–∂–¥—ã–º –¥–Ω–µ–º. –õ—é–±–æ–π, –¥–∞–∂–µ —Å–∞–º—ã–π –º–∞–ª–µ–Ω—å–∫–∏–π —à–∞–≥ –≤ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏, –æ—Å–æ–∑–Ω–∞–Ω–∏–µ —Å–µ–±—è, –∫–∞–∂–¥—ã–π –≥–ª—É–±–æ–∫–∏–π –≤–¥–æ—Ö –ø–µ—Ä–µ–¥ –æ—Ç–≤–µ—Ç–æ–º ‚Äî —ç—Ç–æ —É–∂–µ —É—Å–ø–µ—Ö. –¢—ã –≤—Å–µ –¥–µ–ª–∞–µ—à—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ! üí™üåü')
    if message.text == 'SOS':
        sos = open('./images/sos.jpg', 'rb')
        bot.send_photo(message.chat.id, sos)
        markup = types.ReplyKeyboardMarkup()
        btn_dih = types.KeyboardButton('–î—ã—Ö–∞—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–∞–∫—Ç–∏–∫–∏')
        btn_pr = types.KeyboardButton('–ü—Ä–∞–∫—Ç–∏–∫–∞ –∑–∞–º–µ–¥–ª–µ–Ω–∏—è —Ç—Ä–µ–≤–æ–≥–∏')
        markup.add(btn_dih, btn_pr)
        bot.send_message(message.chat.id, '–í—ã–±–µ—Ä–∏—Ç–µ, –æ —á–µ–º –≤—ã —Ö–æ—Ç–∏—Ç–µ —É–∑–Ω–∞—Ç—å', reply_markup=markup)
    if message.text == '–î—ã—Ö–∞—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–∞–∫—Ç–∏–∫–∏':
        bot.send_message(message.chat.id, '–î—ã—Ö–∞–Ω–∏–µ ¬´–ö–≤–∞–¥—Ä–∞—Ç–æ–º¬ª (–Ω–∞ 4 —Å—á–µ—Ç–∞):'
                        '4 —Å–µ–∫—É–Ω–¥—ã ‚Äî –º–µ–¥–ª–µ–Ω–Ω—ã–π –≤–¥–æ—Ö.'
                        '4 —Å–µ–∫—É–Ω–¥—ã ‚Äî –∑–∞–¥–µ—Ä–∂–∫–∞ –¥—ã—Ö–∞–Ω–∏—è.'
                        '4 —Å–µ–∫—É–Ω–¥—ã ‚Äî –ø–ª–∞–≤–Ω—ã–π –≤—ã–¥–æ—Ö.'
                        '4 —Å–µ–∫—É–Ω–¥—ã ‚Äî –ø–∞—É–∑–∞.'
                        '–ü–æ–≤—Ç–æ—Ä–∏ 3-5 —Ü–∏–∫–ª–æ–≤.')
    if message.text == '–ü—Ä–∞–∫—Ç–∏–∫–∞ –∑–∞–º–µ–¥–ª–µ–Ω–∏—è —Ç—Ä–µ–≤–æ–≥–∏':
        bot.send_message(message.chat.id, '–¢–µ—Ö–Ω–∏–∫–∞ ¬´5-4-3-2-1¬ª, –≤—Å–ø–æ–º–Ω–∏:'
'5 –≤–µ—â–µ–π, –∫–æ—Ç–æ—Ä—ã–µ —Ç—ã –≤–∏–¥–∏—à—å –≤–æ–∫—Ä—É–≥.'
'4 –≤–µ—â–∏, –∫ –∫–æ—Ç–æ—Ä—ã–º –º–æ–∂–µ—à—å –ø—Ä–∏–∫–æ—Å–Ω—É—Ç—å—Å—è.'
'3 –∑–≤—É–∫–∞, –∫–æ—Ç–æ—Ä—ã–µ —Ç—ã —Å–ª—ã—à–∏—à—å.'
'2 –∑–∞–ø–∞—Ö–∞, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–µ—à—å –ø–æ—á—É–≤—Å—Ç–≤–æ–≤–∞—Ç—å.'
'1–≤–∫—É—Å (—Å–¥–µ–ª–∞–π –≥–ª–æ—Ç–æ–∫ –≤–æ–¥—ã –∏–ª–∏ –≤—Å–ø–æ–º–Ω–∏ –≤–∫—É—Å –ª—é–±–∏–º–æ–π –µ–¥—ã).')
    if message.text == '–ù–∞–≤–∏–≥–∞—Ç–æ—Ä –ø–æ–º–æ—â–∏':
        pomo = open('./images/pomo.jpg', 'rb')
        bot.send_photo(message.chat.id, pomo)
        markup = types.ReplyKeyboardMarkup()
        btn_bully = types.KeyboardButton('–ü–æ–º–æ—â—å —Å –±—É–ª–ª–∏–Ω–≥–æ–º')
        btn_ssori = types.KeyboardButton('–ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã —Å —Ä–æ–¥–∏—Ç–µ–ª—è–º–∏/—É—á–∏—Ç–µ–ª—è–º–∏')
        btn_stress = types.KeyboardButton('–°—Ç—Ä–µ—Å—Å –ø–µ—Ä–µ–¥ —ç–∫–∑–∞–º–µ–Ω–æ–º')
        markup.add(btn_bully, btn_ssori, btn_stress)
        bot.send_message(message.chat.id, '–í—ã–±–µ—Ä–∏—Ç–µ, —Å —á–µ–º –≤–∞–º –Ω—É–∂–Ω–∞ –ø–æ–º–æ—â—å', reply_markup=markup)
    if message.text == '–ü–æ–º–æ—â—å —Å –±—É–ª–ª–∏–Ω–≥–æ–º':
        bot.send_message(message.chat.id, '–ü—Ä–∏–≤–µ—Ç, –º–æ–π –¥–æ—Ä–æ–≥–æ–π! –®–ª—é —Ç–µ–±–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–±—ä—è—Ç–∏–µ –≤ –∑–Ω–∞–∫ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ ü´Ç, —É–∑–Ω–∞–≤ –æ —Å–ª—É—á–∏–≤—à–µ–º—Å—è. '
                         '–ü–æ–º–Ω–∏, –≤–∏–Ω—ã —Ç–≤–æ–µ–π –∑–¥–µ—Å—å –Ω–µ—Ç. –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –≤—Å–µ–≥–¥–∞ –ª–µ–∂–∏—Ç –Ω–∞ —Ç–æ–º, –∫—Ç–æ –ø—Ä–æ—è–≤–ª—è–µ—Ç –∞–≥—Ä–µ—Å—Å–∏—é, –∞ –Ω–µ –Ω–∞ —Ç–µ–±–µ. '
                         '–¢—ã –Ω–∞–º–Ω–æ–≥–æ —Å–∏–ª—å–Ω–µ–µ, —á–µ–º –∫–∞–∂–µ—Ç—Å—è –≤ —ç—Ç–æ—Ç –Ω–µ–ø—Ä–æ—Å—Ç–æ–π –º–æ–º–µ–Ω—Ç üí™. '
                         '–û—á–µ–Ω—å –ø—Ä–æ—à—É, –Ω–µ –∑–∞–º—ã–∫–∞–π—Å—è –≤ —Å–µ–±–µ. –ü–æ–¥–µ–ª–∏—Å—å –ø–µ—Ä–µ–∂–∏–≤–∞–Ω–∏—è–º–∏ —Å –±–ª–∏–∑–∫–∏–º —á–µ–ª–æ–≤–µ–∫–æ–º, –∫–æ—Ç–æ—Ä—ã–π —Å–º–æ–∂–µ—Ç —Ç–µ–±—è –ø–æ–¥–¥–µ—Ä–∂–∞—Ç—å. '
                         '–Ø –≤—Å–µ–≥–¥–∞ –Ω–∞ —Ç–≤–æ–µ–π —Å—Ç–æ—Ä–æ–Ω–µ üòä. –ö—Ä–µ–ø–∏—Å—å, —ç—Ç–æ—Ç —Ç—Ä—É–¥–Ω—ã–π —ç—Ç–∞–ø –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∑–∞–∫–æ–Ω—á–∏—Ç—Å—è. –ï—Å–ª–∏ –∑–∞—Ö–æ—á–µ—à—å, –º–æ–∂–µ—à—å –ø–æ–¥–µ–ª–∏—Ç—å—Å—è –¥–µ—Ç–∞–ª—è–º–∏ –ø—Ä–æ–∏–∑–æ—à–µ–¥—à–µ–≥–æ.')
    if message.text == '–ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã —Å —Ä–æ–¥–∏—Ç–µ–ª—è–º–∏/—É—á–∏—Ç–µ–ª—è–º–∏':
        bot.send_message(message.chat.id, '–°—Å–æ—Ä—ã —Å —Ä–æ–¥–Ω—ã–º–∏ ‚Äì –≤—Å–µ–≥–¥–∞ –Ω–µ–ø—Ä–∏—è—Ç–Ω—ã–π –æ–ø—ã—Ç. –ü–æ–º–Ω–∏, —Ç–≤–æ–∏ –ø–µ—Ä–µ–∂–∏–≤–∞–Ω–∏—è –∏–º–µ—é—Ç –∑–Ω–∞—á–µ–Ω–∏–µ. –¢—ã –Ω–µ –Ω–µ—Å–µ—à—å –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –∑–∞ —á—É–∂–∏–µ –¥–µ–π—Å—Ç–≤–∏—è. '
                                          '–ü–æ–ø—ã—Ç–∞–π—Å—è –≤—ã—Ä–∞–∑–∏—Ç—å —Å–≤–æ–∏ —á—É–≤—Å—Ç–≤–∞ —Å–¥–µ—Ä–∂–∞–Ω–Ω–æ, –Ω–∞—á–∏–Ω–∞—è —Å–æ —Å–ª–æ–≤: ¬´–Ø —á—É–≤—Å—Ç–≤—É—é –±–æ–ª—å, –∫–æ–≥–¥–∞‚Ä¶¬ª. –ï—Å–ª–∏ —ç—Ç–æ —Å–ª–æ–∂–Ω–æ, –Ω–µ –∫–æ—Ä–∏—Ç–µ —Å–µ–±—è. –≠—Ç–æ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ. '
                                          '–ù–µ –æ—Å—Ç–∞–≤–∞–π—Å—è –≤ –æ–¥–∏–Ω–æ—á–µ—Å—Ç–≤–µ. –û–±—Ä–∞—Ç–∏—Å—å –∑–∞ –ø–æ–º–æ—â—å—é –∫ —á–µ–ª–æ–≤–µ–∫—É, –∫–æ—Ç–æ—Ä–æ–º—É –¥–æ–≤–µ—Ä—è–µ—à—å. –¢—ã –Ω–µ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω. '
                                          '–Ø —Ä—è–¥–æ–º ü§ù –≠—Ç–æ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç—Ä—É–¥–Ω–æ—Å—Ç–∏. –¢—ã –ø—Ä–µ–æ–¥–æ–ª–µ–µ—à—å –∏—Ö. –ú—ã –º–æ–∂–µ–º —Ä–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å —Ç–≤–æ—é —Å–∏—Ç—É–∞—Ü–∏—é –±–æ–ª–µ–µ –¥–µ—Ç–∞–ª—å–Ω–µ–µ')
    if message.text == '–°—Ç—Ä–µ—Å—Å –ø–µ—Ä–µ–¥ —ç–∫–∑–∞–º–µ–Ω–∞–º–∏':
        bot.send_message(message.chat.id, '–§–∏–Ω–∞–ª—å–Ω—ã–µ –∏—Å–ø—ã—Ç–∞–Ω–∏—è –ø–æ–¥–æ–±–Ω—ã –∑–∞–±–µ–≥—É –Ω–∞ –¥–ª–∏–Ω–Ω—É—é –¥–∏—Å—Ç–∞–Ω—Ü–∏—é, –∏ –≤–æ—Ç —Ç—ã —É–∂–µ –±–ª–∏–∑–æ–∫ –∫ —Ü–µ–ª–∏. –ù–µ –∑–∞–±—ã–≤–∞–π: '
                                          '–¢—ã —É—Å–µ—Ä–¥–Ω–æ –≥–æ—Ç–æ–≤–∏–ª—Å—è. –í—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∑–Ω–∞–Ω–∏—è —É —Ç–µ–±—è —É–∂–µ –µ—Å—Ç—å. '
                                          '–í–æ–ª–Ω–µ–Ω–∏–µ ‚Äì –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–∞—è —Ä–µ–∞–∫—Ü–∏—è. –û–Ω–æ –ø–æ–º–æ–≥–∞–µ—Ç —Å–æ—Å—Ä–µ–¥–æ—Ç–æ—á–∏—Ç—å—Å—è. –ü—Ä–æ—Å—Ç–æ —Å–¥–µ–ª–∞–π –Ω–µ—Å–∫–æ–ª—å–∫–æ –≥–ª—É–±–æ–∫–∏—Ö –≤–¥–æ—Ö–æ–≤ üòÆ‚Äçüí®. '
                                          '–¢–≤–æ—è –ª–∏—á–Ω–æ—Å—Ç—å ‚â† –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –±–∞–ª–ª. –¢–≤–æ—è –∑–Ω–∞—á–∏–º–æ—Å—Ç—å –Ω–∞–º–Ω–æ–≥–æ –ø—Ä–µ–≤–æ—Å—Ö–æ–¥–∏—Ç –µ–¥–∏–Ω–∏—á–Ω—ã–π –∏—Ç–æ–≥. '
                                          '–°–µ–π—á–∞—Å —Å–∞–º–æ–µ –≥–ª–∞–≤–Ω–æ–µ: —Å–¥–µ–ª–∞–π –≥–ª–æ—Ç–æ–∫ –≤–æ–¥—ã, –æ—Ç–≤–ª–µ–∫–∏—Å—å –æ—Ç —É—á—ë–±—ã –Ω–∞ 30 –º–∏–Ω—É—Ç, –ø–æ–¥—ã—à–∏ —Å–≤–µ–∂–∏–º –≤–æ–∑–¥—É—Ö–æ–º. –¢—ã —Å–¥–µ–ª–∞–ª –≤—Å—ë –≤–æ–∑–º–æ–∂–Ω–æ–µ. –û—Å—Ç–∞–ª–æ—Å—å –ª–∏—à—å –ø—Ä–æ–¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–≤–æ–∏ –∑–Ω–∞–Ω–∏—è. '
                                          '–ü–æ–≤–µ—Ä—å –≤ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å–∏–ª—ã ‚Äì —è –≤ —Ç–µ–±—è –≤–µ—Ä—é! –£ —Ç–µ–±—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –≤—Å—ë –ø–æ–ª—É—á–∏—Ç—Å—è üí™‚ú® –£—Å–ø–µ—Ö–æ–≤! –¢—ã –Ω–µ –æ—Å—Ç–∞–ª—Å—è –æ–¥–∏–Ω –Ω–∞ –æ–¥–∏–Ω —Å —ç—Ç–∏–º.')


def branch(message):
    if message.text == '–í—ã–ø–∏—Ç–∞—è –≤–æ–¥–∞ü•§':
        vv = open('./images/vv.jpg', 'rb')
        bot.send_photo(message.chat.id, vv)
        markup = types.ReplyKeyboardMarkup()
        btn1 = types.KeyboardButton('–í—ã–ø–∏–ª —Å—Ç–∞–∫–∞–Ω –≤–æ–¥—ãüí¶')
        markup.row(btn1)
        bot.send_message(message.chat.id, '–í–æ–¥–∞ (—Ü–µ–ª—å: 6-8 —Å—Ç–∞–∫–∞–Ω–æ–≤):'
                                          '–ù–∞–∂–º–∏ –Ω–∞ –∫–Ω–æ–ø–∫—É, –∫–æ–≥–¥–∞ –≤—ã–ø—å–µ—à—å —Å—Ç–∞–∫–∞–Ω.'
                                          '–°–æ–≤–µ—Ç: –ü–æ—Å—Ç–∞–≤—å –±—É—Ç—ã–ª–∫—É —Å –≤–æ–¥–æ–π –Ω–∞ –≤–∏–¥–Ω–æ–µ –º–µ—Å—Ç–æ.', reply_markup=markup)

    elif message.text == '–°–ø–æ—Ä—Çüí™':
        s = open('./images/s.jpg', 'rb')
        bot.send_photo(message.chat.id, s)
        markup = types.ReplyKeyboardMarkup()
        btn2 = types.KeyboardButton('–û—Ç–º–µ—Ç–∏—Ç—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å‚úÖ')
        markup.row(btn2)
        bot.send_message(message.chat.id, '–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å (—Ü–µ–ª—å: 8000+ —à–∞–≥–æ–≤ –∏–ª–∏ 30 –º–∏–Ω. –¥–≤–∏–∂–µ–Ω–∏—è):'
                                          '–û—Ç–º–µ—Ç—å, –µ—Å–ª–∏ —Å–µ–≥–æ–¥–Ω—è –±—ã–ª–∞ –ø—Ä–æ–≥—É–ª–∫–∞, –∑–∞—Ä—è–¥–∫–∞ –∏–ª–∏ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞.'
                                          '–°–æ–≤–µ—Ç: –í—ã—Ö–æ–¥–∏ –Ω–∞ –æ–¥–Ω—É –æ—Å—Ç–∞–Ω–æ–≤–∫—É —Ä–∞–Ω—å—à–µ, —Ä–∞–∑–≥–æ–≤–∞—Ä–∏–≤–∞–π –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É –Ω–∞ —Ö–æ–¥—É.', reply_markup=markup)
    elif message.text == '–°–æ–Ωüò¥':
        chs = open('./images/chs.jpg', 'rb')
        bot.send_photo(message.chat.id, chs)
        bot.send_message(message.chat.id, '–°–æ–Ω (—Ü–µ–ª—å: 7-9 —á–∞—Å–æ–≤):'
                                          '–û—Ç–º–µ—Ç—å—Å—è, –µ—Å–ª–∏ —Å–µ–≥–æ–¥–Ω—è —Ç–≤–æ–π —Å–æ–Ω –±—ã–ª 7-9 —á–∞—Å–æ–≤, –∏ –Ω–∞–ø–∏—à–∏ —Å–∫–æ–ª—å–∫–æ —á–∞—Å–æ–≤ —Ç—ã —Å–ø–∞–ª'
                                          '–°–æ–≤–µ—Ç: –ó–∞ —á–∞—Å –¥–æ —Å–Ω–∞ ‚Äî —Ä–µ–∂–∏–º ¬´—Ç–∏—à–∏–Ω—ã¬ª –±–µ–∑ —è—Ä–∫–∏—Ö —ç–∫—Ä–∞–Ω–æ–≤.')
        bot.register_next_step_handler(message, sleep_h)


def sleep_h(message):
    conn = sqlite3.connect('database.sql')
    cur = conn.cursor()
    hours = int(message.text.strip())
    cur.execute(
        '''UPDATE users SET h_sleep = h_sleep + ? WHERE name = ?''', (hours, us))
    result = cur.execute('SELECT h_sleep FROM users WHERE name = ?', (us,))
    for elem in result:
        bot.send_message(message.chat.id, f'\n –í—Å–µ–≥–æ —É –≤–∞—Å –±—ã–ª–æ {elem[0]} —á–∞—Å–æ–≤ –∑–¥–æ—Ä–æ–≤–æ–≥–æ —Å–Ω–∞, —Ç–∞–∫ –¥–µ—Ä–∂–∞—Ç—å!')
        if int(elem[0]) >= 30:
            bot.send_message(message.chat.id, '–ü–æ–∑–¥—Ä–∞–≤–ª—è—é! –í—ã –ø–æ–ª—É—á–∏–ª–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ "–ú–∞—Å—Ç–µ—Ä –æ—Ç–¥—ã—Ö–∞üò¥"')
            cur.execute(
                'INSERT INTO achievments_users (achievment_id, user_id) VALUES (3, (SELECT id FROM users WHERE name=?))', (us, ))
        break
    conn.commit()
    cur.close()


# ================= RUN FUNCTIONS =================
def run_flask():
    """–ó–∞–ø—É—Å–∫ Flask —Å–µ—Ä–≤–µ—Ä–∞"""
    print(f"Starting Flask server on port {PORT}...")
    # –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ –∏—Å–ø–æ–ª—å–∑—É–µ–º waitress –≤–º–µ—Å—Ç–æ dev —Å–µ—Ä–≤–µ—Ä–∞ Flask
    serve(app, host='0.0.0.0', port=PORT)


def run_bot_polling():
    """–ó–∞–ø—É—Å–∫ –±–æ—Ç–∞ –≤ —Ä–µ–∂–∏–º–µ polling"""
    print("Starting bot in polling mode...")
    bot.remove_webhook()
    bot.polling(none_stop=True)


def run_bot_webhook():
    """–ó–∞–ø—É—Å–∫ –±–æ—Ç–∞ –≤ —Ä–µ–∂–∏–º–µ webhook"""
    if not WEBHOOK_URL:
        print("WEBHOOK_URL not set, switching to polling mode")
        run_bot_polling()
        return

    print(f"Setting webhook to {WEBHOOK_URL}")
    bot.remove_webhook()
    bot.set_webhook(url=f"{WEBHOOK_URL}/webhook")
    print("Webhook set successfully!")


# ================= MAIN =================
if __name__ == '__main__':
    # –í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã –±–æ—Ç–∞:
    # 1. WEBHOOK - –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
    # 2. POLLING - –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏–ª–∏ –µ—Å–ª–∏ –Ω–µ—Ç –¥–æ–º–µ–Ω–∞

    mode = os.environ.get('BOT_MODE', 'POLLING').upper()

    if mode == 'WEBHOOK' and WEBHOOK_URL:
        # –ó–∞–ø—É—Å–∫–∞–µ–º webhook —Ä–µ–∂–∏–º
        run_bot_webhook()
        # Flask –±—É–¥–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –≤–µ–±—Ö—É–∫–∏ —á–µ—Ä–µ–∑ –º–∞—Ä—à—Ä—É—Ç /webhook
    else:
        # –ó–∞–ø—É—Å–∫–∞–µ–º polling —Ä–µ–∂–∏–º –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø–æ—Ç–æ–∫–µ
        print("Running in POLLING mode")
        bot_thread = threading.Thread(target=run_bot_polling)
        bot_thread.daemon = True
        bot_thread.start()

    # –í—Å–µ–≥–¥–∞ –∑–∞–ø—É—Å–∫–∞–µ–º Flask –¥–ª—è health checks
    run_flask()